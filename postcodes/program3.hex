digit(0). digit(1). digit(2). digit(3). digit(4). digit(5). digit(6). digit(7). digit(8). digit(9).

% input pattern:
pattern(420,421,423,424).

% get digits:
digit1(X,Y) :- plz(X,Y,_,_,_).
digit2(X,Y) :- plz(X,_,Y,_,_).
digit3(X,Y) :- plz(X,_,_,Y,_).
digit4(X,Y) :- plz(X,_,_,_,Y).

pattern1(Y) :- pattern(Y,_,_,_).
pattern2(Y) :- pattern(_,Y,_,_).
pattern3(Y) :- pattern(_,_,Y,_).
pattern4(Y) :- pattern(_,_,_,Y).

pattern(Y) :- pattern1(Y).
pattern(Y) :- pattern2(Y).
pattern(Y) :- pattern3(Y).
pattern(Y) :- pattern4(Y).

pattern_prob(Pat,Dig,Prob) :- &prob_dist[Pat](Dig,Prob), pattern(Pat), digit(Dig).

plz_prob(Plz,Y) :- plz(Plz,X1,X2,X3,X4),
                   pattern(P1,P2,P3,P4),
                   pattern_prob(P1,X1,Prob1), pattern_prob(P2,X2,Prob2),
                   pattern_prob(P3,X3,Prob3), pattern_prob(P4,X4,Prob4),
                   Y1 = Prob1 + Prob2, Y2 = Y1 + Prob3, Y3 = Y2 + Prob4,
                   Y = Y3 / 4.







